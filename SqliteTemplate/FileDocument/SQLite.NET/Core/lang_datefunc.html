<!DOCTYPE html>
<!-- saved from url=(0116)file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="./lang_datefunc_files/sqlite.css" rel="stylesheet">
<title _msttexthash="24197199" _msthash="0">日期和时间函数</title>
<!-- path= -->
</head>
<body>
<div class="nosearch">
<a href="https://www.sqlite.org/index.html">
<img class="logo" src="./lang_datefunc_files/sqlite370_banner.gif" alt="SQLite" border="0" _mstalt="70863" _msthash="1">
</a>
<div><!-- IE hack to prevent disappearing logo --></div>
<div class="tagline desktoponly" _msttexthash="53246063" _msthash="2">小。快。可靠。<br _istranslated="1">选择任意三个。</div>
<div class="menu mainmenu">
<ul>
<li><a href="https://www.sqlite.org/index.html" _msttexthash="2136498" _msthash="3">家</a>
</li><li class="mobileonly" _msthidden="1"><a href="https://www.sqlite.org/javascript:void(0)" onclick="toggle_div(&quot;submenu&quot;)" _msttexthash="45591" _msthidden="1" _msthash="4">Menu</a>
</li><li class="wideonly"><a href="https://www.sqlite.org/about.html" _msttexthash="5448781" _msthash="5">大约</a>
</li><li class="desktoponly"><a href="https://www.sqlite.org/docs.html" _msttexthash="5144373" _msthash="6">文档</a>
</li><li class="desktoponly"><a href="https://www.sqlite.org/download.html" _msttexthash="5638321" _msthash="7">下载</a>
</li><li class="wideonly"><a href="https://www.sqlite.org/copyright.html" _msttexthash="9675445" _msthash="8">许可证</a>
</li><li class="desktoponly"><a href="https://www.sqlite.org/support.html" _msttexthash="4993053" _msthash="9">支持</a>
</li><li class="desktoponly"><a href="https://www.sqlite.org/prosupport.html" _msttexthash="5377151" _msthash="10">购买</a>
</li><li class="search" id="search_menubutton" _msthidden="1" style="display: none;">
<a href="https://www.sqlite.org/javascript:void(0)" onclick="toggle_search()" _msttexthash="74607" _msthidden="1" _msthash="11">Search</a>
</li></ul>
</div>
<div class="menu submenu" id="submenu" _msthidden="5">
<ul _msthidden="5">
<li _msthidden="1"><a href="https://www.sqlite.org/about.html" _msttexthash="60892" _msthidden="1" _msthash="12">About</a>
</li><li _msthidden="1"><a href="https://www.sqlite.org/docs.html" _msttexthash="234962" _msthidden="1" _msthash="13">Documentation</a>
</li><li _msthidden="1"><a href="https://www.sqlite.org/download.html" _msttexthash="113308" _msthidden="1" _msthash="14">Download</a>
</li><li _msthidden="1"><a href="https://www.sqlite.org/support.html" _msttexthash="100646" _msthidden="1" _msthash="15">Support</a>
</li><li _msthidden="1"><a href="https://www.sqlite.org/prosupport.html" _msttexthash="113477" _msthidden="1" _msthash="16">Purchase</a>
</li></ul>
</div>
<div class="searchmenu" id="searchmenu" _msthidden="3">
<form method="GET" action="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/search" _msthidden="3">
<select name="s" id="searchtype" _msthidden="2">
<option value="d" _msttexthash="416429" _msthidden="1" _msthash="17">Search Documentation</option>
<option value="c" _msttexthash="276705" _msthidden="1" _msthash="18">Search Changelog</option>
</select>
<input type="text" name="q" id="searchbox" value="">
<input type="submit" value="Go" _msthidden="A" _mstvalue="18005" _msthash="19">
</form>
</div>
</div>
<script>
function toggle_div(nm) {
var w = document.getElementById(nm);
if( w.style.display=="block" ){
w.style.display = "none";
}else{
w.style.display = "block";
}
}
function toggle_search() {
var w = document.getElementById("searchmenu");
if( w.style.display=="block" ){
w.style.display = "none";
} else {
w.style.display = "block";
setTimeout(function(){
document.getElementById("searchbox").focus()
}, 30);
}
}
function div_off(nm){document.getElementById(nm).style.display="none";}
window.onbeforeunload = function(e){div_off("submenu");}
/* Disable the Search feature if we are not operating from CGI, since */
/* Search is accomplished using CGI and will not work without it. */
if( !location.origin || 1 ){
document.getElementById("search_menubutton").style.display = "none";
}
/* Used by the Hide/Show button beside syntax diagrams, to toggle the */
function hideorshow(btn,obj){
var x = document.getElementById(obj);
var b = document.getElementById(btn);
if( x.style.display!='none' ){
x.style.display = 'none';
b.innerHTML='show';
}else{
x.style.display = '';
b.innerHTML='hide';
}
return false;
}

</script>
<div class="fancy">
<div class="nosearch">
<div class="fancy_title" _msttexthash="24197199" _msthash="20">日期和时间函数</div>
<div class="fancy_toc">
<a onclick="toggle_toc()" _msttexthash="6900647" _msthash="21"><span class="fancy_toc_mark" id="toc_mk" _istranslated="1">►</span> 目录</a>
<div id="toc_sub" _msthidden="5"><div class="fancy-toc1" _msthidden="1"><a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#overview" _msttexthash="149552" _msthidden="1" _msthash="22">1. Overview</a></div>
<div class="fancy-toc1" _msthidden="1"><a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#time_values" _msttexthash="190970" _msthidden="1" _msthash="23">2. Time Values</a></div>
<div class="fancy-toc1" _msthidden="1"><a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#modifiers" _msttexthash="168714" _msthidden="1" _msthash="24">3. Modifiers</a></div>
<div class="fancy-toc1" _msthidden="1"><a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#examples" _msttexthash="146263" _msthidden="1" _msthash="25">4. Examples</a></div>
<div class="fancy-toc1" _msthidden="1"><a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#caveats_and_bugs" _msttexthash="291577" _msthidden="1" _msthash="26">5. Caveats And Bugs</a></div>
</div>
</div>
<script>
function toggle_toc(){
var sub = document.getElementById("toc_sub")
var mk = document.getElementById("toc_mk")
if( sub.style.display!="block" ){
sub.style.display = "block";
mk.innerHTML = "&#x25bc;";
} else {
sub.style.display = "none";
mk.innerHTML = "&#x25ba;";
}
}
</script>
</div>




<h1 id="overview" _msttexthash="7959653" _msthash="27"><span _istranslated="1">1. </span>概述</h1>

<p _msttexthash="119875912" _msthash="28">SQLite 支持以下 7 个<a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_corefunc.html" _istranslated="1">标量</a>日期和时间函数：</p>

<p>
</p><ol>
<li> <font _mstmutation="1" _msttexthash="78204893" _msthash="29"><b _mstmutation="1" _istranslated="1">date（</b><i _mstmutation="1" _istranslated="1">时间值、修饰符、修饰符、...</i></font><b>)</b> </li>
<li> <font _mstmutation="1" _msttexthash="78206362" _msthash="30"><b _mstmutation="1" _istranslated="1">time（</b><i _mstmutation="1" _istranslated="1">时间值、修饰符、修饰符、...</i></font><b>)</b> </li>
<li> <font _mstmutation="1" _msttexthash="145051023" _msthash="31"><b _mstmutation="1" _istranslated="1">datetime（</b><i _mstmutation="1" _istranslated="1">时间值， 修饰符， 修饰符， ...</i></font><b>)</b> </li>
<li> <font _mstmutation="1" _msttexthash="151947926" _msthash="32"><b _mstmutation="1" _istranslated="1">julianday（</b><i _mstmutation="1" _istranslated="1">时间值， 修饰符， 修饰符， ...</i></font><b>)</b> </li>
<li> <font _mstmutation="1" _msttexthash="151949590" _msthash="33"><b _mstmutation="1" _istranslated="1">unixepoch（</b><i _mstmutation="1" _istranslated="1">时间值， 修饰符， 修饰符， ...</i></font><b>)</b> </li>
<li> <font _mstmutation="1" _msttexthash="123192771" _msthash="34"><b _mstmutation="1" _istranslated="1">strftime（</b><i _mstmutation="1" _istranslated="1">格式、时间值、修饰符、修饰符、...</i></font><b>)</b> </li>
<li> <font _mstmutation="1" _msttexthash="70832333" _msthash="35"><b _mstmutation="1" _istranslated="1">timediff（</b><i _mstmutation="1" _istranslated="1">时间值， 时间值</i></font><b>)</b> </li>
</ol>

<p _msttexthash="1603073888" _msthash="36">前 6 个日期和时间函数将可选的 <a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#tmval" _istranslated="1">time-value</a> 作为参数，后跟
零个或多个<a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#dtmods" _istranslated="1">修饰符</a>。
strftime（） 函数还将格式字符串作为其第一个参数。
timediff（） 函数正好接受两个参数，这两个参数都是<a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#tmval" _istranslated="1">时间值</a>。</p>

<p _msttexthash="329471766" _msthash="37">SQLite 没有专用的日期/时间数据类型。相反
日期和时间值可以存储为以下任何值：</p><p></p><blockquote>
<table border="0" cellspacing="0" cellpadding="0">
<tbody><tr>
<td><a href="http://en.wikipedia.org/wiki/ISO_8601" _msttexthash="56971824" _msthash="38">国际标准化组织 （ISO-8601）</a>
</td><td><font _mstmutation="1" _msttexthash="217130394" _msthash="39">作为 ISO 8601 日期/时间值的文本字符串。
示例：<tt _mstmutation="1" _istranslated="1">'2025-05-29 14：16：00'</tt></font>
</td></tr><tr>
<td><a href="http://en.wikipedia.org/wiki/Julian_day" _msttexthash="11441911" _msthash="40">儒略日数</a>
</td><td><font _mstmutation="1" _msttexthash="313619865" _msthash="41">自 -4713-11-24 12：00：00 以来的天数（包括小数部分天数）
示例：<tt _mstmutation="1" _istranslated="1">2460825.09444444</tt></font>
</td></tr><tr>
<td><a href="https://en.wikipedia.org/wiki/Unix_time" _msttexthash="14016665" _msthash="42">Unix 时间戳</a>
</td><td><font _mstmutation="1" _msttexthash="262907970" _msthash="43">自 1970-01-01 00：00：00 以来的秒数（包括小数秒）
示例：<tt _mstmutation="1" _istranslated="1">1748528160</tt></font>
</td></tr></tbody></table>
</blockquote>

<p><font _mstmutation="1" _msttexthash="2236885781" _msthash="44">这三种格式统称为<a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#tmval" _mstmutation="1" _istranslated="1">时间值</a>。
所有日期时间函数都接受 ISO-8601 文本或
作为儒略日数字。它们也可以通过以下方式接受 unix 时间戳
添加可选修饰符参数 <a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#automod" _mstmutation="1" _istranslated="1">'auto'</a> 或 <a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#jdmod" _mstmutation="1" _istranslated="1">'unixepoch'</a>。
由于 timediff（） 函数不接受修饰符，因此
它只能使用 ISO-8601 和儒略日数字时间值。</font><a name="dttm"></a>

</p><p><font _mstmutation="1" _msttexthash="112520694" _msthash="45"><b _mstmutation="1" _istranslated="1">date（）</b> 函数以文本格式返回日期：YYYY-MM-DD。</font><a name="dttm"></a>

</p><p><font _mstmutation="1" _msttexthash="425206899" _msthash="46"><b _mstmutation="1" _istranslated="1">time（）</b> 函数以 HH：MM：SS 或 HH：MM：SS 格式的文本形式返回时间。SSS 如果
使用 <a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#subsec" _mstmutation="1" _istranslated="1">Subsec 修饰符</a>。</font><a name="dttm"></a>

</p><p><font _mstmutation="1" _msttexthash="590609747" _msthash="47"><b _mstmutation="1" _istranslated="1">datetime（）</b> 函数返回格式为 YYYY-MM-DD HH：MM：SS 或
如 YYYY-MM-DD HH：MM：SS。SSS（如果使用 <a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#subsec" _mstmutation="1" _istranslated="1">subsec 修饰符</a>）。</font><a name="jlndy"></a>

</p><p><font _mstmutation="1" _msttexthash="556577112" _msthash="48"><b _mstmutation="1" _istranslated="1">julianday（）</b> 函数返回<a href="http://en.wikipedia.org/wiki/Julian_day" _mstmutation="1" _istranslated="1">儒略日</a> - 该
自公元前 4714 年 11 月 24 日格林威治中午以来的分数
（<a href="http://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar" _mstmutation="1" _istranslated="1">前格里高利历</a>）。</font><a name="uepch"></a>

</p><p><font _mstmutation="1" _msttexthash="1544785632" _msthash="49"><b _mstmutation="1" _istranslated="1">unixepoch（）</b> 函数返回 unix 时间戳 - 秒数
自 1970-01-01 00：00：00 UTC 起。unixepoch（） 函数通常返回
整数秒，但使用可选的 <a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#subsec" _mstmutation="1" _istranslated="1">subsec 修饰符</a> it
将返回一个浮点数，即秒的小数部分。</font><a name="strftm"></a>

</p><p _msttexthash="3295087744" _msthash="50"><b _istranslated="1">strftime（）</b> 函数返回根据
指定为第一个参数的 format 字符串。
格式字符串支持标准 C 库中 <a href="http://opengroup.org/onlinepubs/007908799/xsh/strftime.html" _istranslated="1">strftime（） 函数</a>中最常见的替换，以及两个新的替换 %f 和 %J。
以下是有效 strftime（） 替换的完整列表
自版本 3.46.0 （2024-05-23） 起。早期版本的 SQLite
可能不支持所有替换。如果 undefined 或 unsupported
substitution is seen 时，结果为 NULL。</p>

<blockquote>
<table border="0" cellpadding="0" cellspacing="0">
<tbody><tr><td></td><td width="10"></td><td></td></tr>

<tr><td _msttexthash="13767" _msthash="51">%d</td><td></td><td _msttexthash="26205478" _msthash="52">每月的日期：01-31</td></tr><tr><td _msttexthash="13871" _msthash="53">%e</td><td></td><td _msttexthash="53307787" _msthash="54">不带前导零的月份日期：1-31</td></tr><tr><td _msttexthash="13975" _msthash="55">%f</td><td></td><td _msttexthash="19134193" _msthash="56">小数秒：SS。SSS</td></tr><tr><td _msttexthash="10647" _msthash="57">%F</td><td></td><td _msttexthash="23736284" _msthash="58">ISO 8601 日期：YYYY-MM-DD</td></tr><tr><td _msttexthash="10751" _msthash="59">%G</td><td></td><td _msttexthash="18140226" _msthash="60">对应于 %V 的 ISO 8601 年</td></tr><tr><td _msttexthash="14079" _msthash="61">%g</td><td></td><td _msttexthash="28529709" _msthash="62">对应于 %V 的 2 位 ISO 8601 年份</td></tr><tr><td _msttexthash="10855" _msthash="63">%H</td><td></td><td _msttexthash="12538045" _msthash="64">小时：00-24</td></tr><tr><td _msttexthash="2614287" _msthash="65">%我</td><td></td><td _msttexthash="29196531" _msthash="66">12 小时制小时：01-12</td></tr><tr><td _msttexthash="14391" _msthash="67">%j</td><td></td><td _msttexthash="29551743" _msthash="68">年份中的日期：001-366</td></tr><tr><td _msttexthash="11063" _msthash="69">%J</td><td></td><td _msttexthash="40324973" _msthash="70">儒略日数（分数）</td></tr><tr><td _msttexthash="14495" _msthash="71">%k</td><td></td><td _msttexthash="41623140" _msthash="72">不带前导零的小时：0-24</td></tr><tr><td _msttexthash="2220543" _msthash="73">%升</td><td></td><td _msttexthash="30626661" _msthash="74">%I 不带前导零：1-12</td></tr><tr><td _msttexthash="14703" _msthash="75">%m</td><td></td><td _msttexthash="9226555" _msthash="76">月： 01-12</td></tr><tr><td _msttexthash="11375" _msthash="77">%M</td><td></td><td _msttexthash="13547963" _msthash="78">分钟：00-59</td></tr><tr><td _msttexthash="15015" _msthash="79">%p</td><td></td><td _msttexthash="38556323" _msthash="80">“AM” 或 “PM” 取决于时间</td></tr><tr><td _msttexthash="11687" _msthash="81">%P</td><td></td><td _msttexthash="38574627" _msthash="82">“am” 或 “pm” 取决于时间</td></tr><tr><td _msttexthash="11895" _msthash="83">%R</td><td></td><td _msttexthash="42079544" _msthash="84">ISO 8601 时间：HH：MM</td></tr><tr><td _msttexthash="15327" _msthash="85">%s</td><td></td><td _msttexthash="50417172" _msthash="86">自 1970 年 1 月 1 日以来的秒数</td></tr><tr><td _msttexthash="11999" _msthash="87">%S</td><td></td><td _msttexthash="13218855" _msthash="88">秒数：00-59</td></tr><tr><td _msttexthash="12103" _msthash="89">%T</td><td></td><td _msttexthash="60807773" _msthash="90">ISO 8601 时间：HH：MM：SS</td></tr><tr><td _msttexthash="12207" _msthash="91">%U</td><td></td><td _msttexthash="105206816" _msthash="92">当周 （00-53） - 第 1 周从第一个星期日开始</td></tr><tr><td _msttexthash="15535" _msthash="93">%u</td><td></td><td _msttexthash="48643569" _msthash="94">第 1-7 周的日期，星期一 ==1</td></tr><tr><td _msttexthash="12311" _msthash="95">%V</td><td></td><td _msttexthash="8669609" _msthash="96">ISO 8601 年周</td></tr><tr><td _msttexthash="15743" _msthash="97">%w</td><td></td><td _msttexthash="66304537" _msthash="98">第 0 周到第 6 周的日期，星期日 = = 0</td></tr><tr><td _msttexthash="12415" _msthash="99">%W</td><td></td><td _msttexthash="103139270" _msthash="100">当周 （00-53） - 第 1 周从第一个星期一开始</td></tr><tr><td _msttexthash="12623" _msthash="101">%Y</td><td></td><td _msttexthash="12029966" _msthash="102">年份： 0000-9999</td></tr><tr><td> %% </td><td></td><td> %
</td></tr></tbody></table>
</blockquote>

<p _msttexthash="170202604" _msthash="103">其他日期和时间函数可以表示
就 strftime（） 而言：</p>

<blockquote>
<table border="0" cellpadding="0" cellspacing="0">
<tbody><tr><td><b _msttexthash="5358925" _msthash="104">功能</b></td><td width="30"></td><td><b _msttexthash="35416563" _msthash="105">等效 strftime（）</b>
</td></tr><tr><td _msttexthash="23811502" _msthash="106">日期（...）</td><td></td><td _msttexthash="50277916" _msthash="107">strftime（'%F'， ...）</td></tr><tr><td _msttexthash="25059905" _msthash="108">时间（...）</td><td></td><td _msttexthash="50281192" _msthash="109">strftime（'%T'， ...）</td></tr><tr><td _msttexthash="35254466" _msthash="110">日期时间（...）</td><td></td><td _msttexthash="53708603" _msthash="111">strftime（'%F %T'， ...）</td></tr><tr><td _msttexthash="32692101" _msthash="112">朱利安戴（...）</td><td></td><td>  <nobr _msttexthash="119134327" _msthash="113">CAST（strftime（'%J'， ...） 作为 REAL）</nobr>
</td></tr><tr><td _msttexthash="30726280" _msthash="114">unixepoch（...）</td><td></td><td>  <nobr _msttexthash="118271764" _msthash="115">CAST（strftime（'%s'， ...） 作为 INT）</nobr>
</td></tr></tbody></table>
</blockquote>

<p _msttexthash="2647233576" _msthash="116">date（）、time（） 和 datetime（） 函数都返回文本，因此它们的
strftime（） 等效项是精确的。但是，julianday（）
和 unixepoch（） 函数返回数值。它们的 strftime（） 等效项
返回一个字符串，该字符串是相应数字的文本表示形式。</p>

<p _msttexthash="2074920575" _msthash="117">提供 strftime（） 以外的函数的主要原因是
为了方便和效率。julianday（） 和 unixepoch（）
函数分别返回 real 和 integer 值，并且不会
产生格式转换成本或因使用而导致的不精确性
使用 strftime（） 函数的 '%J' 或 '%s' 格式说明符。</p>

<a name="tmdif"></a>

<p _msttexthash="918014812" _msthash="118"><b _istranslated="1">timediff（A，B）</b> 函数返回一个描述金额的字符串
必须添加到 B 才能到达时间 A 的时间。格式
timediff（） 结果设计为人类可读。格式为：</p><blockquote _msttexthash="43762641" _msthash="119">(+|-)YYYY-MM-DD HH：MM：SS.SSS</blockquote>
<p _msttexthash="256910654" _msthash="120">此时间差字符串也是另一个
date/time 函数。以下不变量适用于时间值 A
和 B：</p><blockquote _msttexthash="224857477" _msthash="121">日期时间 （A） = 日期时间 （B， 时间差异 （A，B））</blockquote>

<p _msttexthash="2304221842" _msthash="122">月份和年份的长度各不相同。二月比三月短。
闰年比非闰年长。timediff（） 的输出
考虑到这一切。timediff（） 函数旨在提供
对时间跨度的人类友好描述。如果您想了解
两个日期 A 和 B 之间的天数或秒数，那么您总是可以这样做
其中之一：</p><blockquote _msttexthash="304764330" _msthash="123">选择 julianday（B） - julianday（A）;<br _istranslated="1">选择 unixepoch（B） - unixepoch（A）;</blockquote>

<p _msttexthash="2142142782" _msthash="124">timediff（A，B） 即使对于值 A 和 B 也可能返回相同的结果
跨越不同的天数 - 具体取决于开始日期。
例如，以下两个 timediff（） 调用都返回
相同的结果 （“-0000-01-00 00：00：00.000”） 即使第一个时间跨度
是 28 天，秒是 31 天：</p><blockquote _msttexthash="294470137" _msthash="125">选择 timediff（'2023-02-15'，'2023-03-15'）;<br _istranslated="1">选择 timediff（'2023-03-15'，'2023-04-15'）;</blockquote>
<p _msttexthash="1233567790" _msthash="126">摘要：如果你想要一个对人类友好的时间跨度，请使用 timediff（）。如果你
想要精确的时差（以天或秒为单位）使用差值
在两个 JulianDay（） 或 Unixepoch（） 调用之间。</p>


<a name="tmval"></a>

<h1 id="time_values" _msttexthash="10990928" _msthash="127"><span _istranslated="1">2. </span>时间值</h1>

<p _msttexthash="687802154" _msthash="128">time-value 可以采用以下任何格式，如下所示。
该值通常是一个字符串，尽管它可以是整数或浮点数
Point number（格式为 12）。</p><ol>
<li> <i _msttexthash="5059223" _msthash="129">YYYY-MM-DD 型</i>
</li><li> <i _msttexthash="39255645" _msthash="130">YYYY-MM-DD 高：毫米</i>
</li><li> <i _msttexthash="35039004" _msthash="131">YYYY-MM-DD HH：MM：SS</i>
</li><li> <i _msttexthash="35141353" _msthash="132">YYYY-MM-DD HH：MM：SS.SSS</i>
</li><li> <font _mstmutation="1" _msttexthash="17182191" _msthash="133"><i _mstmutation="1" _istranslated="1">YYYY-MM-DD</i><b _mstmutation="1" _istranslated="1">T</b><i _mstmutation="1" _istranslated="1">HH：MM</i></font>
</li><li> <font _mstmutation="1" _msttexthash="36761556" _msthash="134"><i _mstmutation="1" _istranslated="1">YYYY-MM-DD</i><b _mstmutation="1" _istranslated="1">T</b><i _mstmutation="1" _istranslated="1">HH：MM：SS</i></font>
</li><li> <font _mstmutation="1" _msttexthash="36867740" _msthash="135"><i _mstmutation="1" _istranslated="1">YYYY-MM-DD</i><b _mstmutation="1" _istranslated="1">T</b><i _mstmutation="1" _istranslated="1">HH：MM：SS.SSS</i></font>
</li><li> <i _msttexthash="7675863" _msthash="136">HH：MM</i>
</li><li> <i _msttexthash="17892732" _msthash="137">HH：MM：SS</i>
</li><li> <i _msttexthash="20344311" _msthash="138">HH：MM：SS。SSS</i>
</li><li> <b _msttexthash="5015504" _msthash="139">现在</b>
</li><li> <i _msttexthash="101660" _msthash="140">DDDDDDDDDD</i>
</li></ol>

<p _msttexthash="8303105512" _msthash="141">在格式 5 到 7 中，“T” 是分隔的文本字符
日期和时间，如 <a href="http://www.w3c.org/TR/NOTE-datetime" _istranslated="1">ISO-8601</a> 要求。
仅指定时间的格式 8 到 10 假定日期为
2000-01-01. 格式 11，即字符串 'now'，被转换为
从 xCurrentTime 方法获取的当前日期和时间
正在使用的 <a href="https://www.sqlite.org/c3ref/vfs.html" _istranslated="1">sqlite3_vfs</a> 对象。
date 和 time 函数的 'now' 参数总是精确地返回
同一 <a href="https://www.sqlite.org/c3ref/step.html" _istranslated="1">sqlite3_step（）</a> 调用中的多个调用具有相同的值。使用<a href="http://en.wikipedia.org/wiki/Coordinated_Universal_Time" _istranslated="1">通用协调时间 （UTC）。</a>
格式 12 是以整数或浮点值表示的<a href="http://en.wikipedia.org/wiki/Julian_day" _istranslated="1">儒略日数</a>。
如果格式 12 紧跟在后面，也可能被解释为 unix 时间戳
<a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#automod" _istranslated="1">'auto'</a> 或 <a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#jdmod" _istranslated="1">'unixepoch'</a> 修饰符。</p>

<p _msttexthash="2374828404" _msthash="142">格式 2 到 10 可以选择后跟格式为
“<i _istranslated="1">[+-]HH：MM</i>” 或只是 “<i _istranslated="1">Z</i>”。日期和时间函数使用 UTC 或 “zulu”
time 的 s，因此 “Z” 后缀是 no-op。任何非零的 “HH：MM” 后缀都是
从指示的日期和时间中减去，以计算 Zulu 时间。
例如，以下所有 time-values 都是等效的：</p>

<blockquote _msttexthash="290669418" _msthash="143">2013-10-07 08：23：19.120<br _istranslated="1"> 2013-10-07T08：23：19.120Z<br _istranslated="1"> 2013-10-07 04：23：19.120-04：00<br _istranslated="1"> 2456572.84952685</blockquote>

<p _msttexthash="4375590401" _msthash="144">在格式 4、7 和 10 中，秒的小数部分值 SS.SSS 可以具有
小数点后有一个或多个数字。正好有三位数字是
在示例中显示，因为只有前 3 位数字有效
添加到结果中，但输入字符串的位数可以少于或超过 3 位数
日期/时间函数仍将正常运行。
同样，格式 12 显示 10 位有效数字，但日期/时间
函数将真正接受所需数量或数量的数字，以便
表示儒略日数。</p>

<p><font _mstmutation="1" _msttexthash="656733857" _msthash="145">在除 timediff（） 之外的所有函数中，
可以省略 time-value（和所有修饰符），在这种情况下，时间
假定值为 'now'。</font><a name="dtmods"></a>

</p><h1 id="modifiers" _msttexthash="12018097" _msthash="146"><span _istranslated="1">3. </span>修饰符</h1>

<p _msttexthash="2161747900" _msthash="147">对于除 timediff（） 之外的所有日期/时间函数，
time-value 参数可以后跟零个或多个修饰符，这些修饰符
更改日期和/或时间。每个修饰符
是应用于其左侧的 time-value 的转换。
修饰符从左到右应用;顺序很重要。
可用的修饰符如下。</p>

<ol>
<li value="1" _msttexthash="2991586" _msthash="148">NNN 天</li><li value="2" _msttexthash="6820632" _msthash="149">NNN 小时</li><li value="3" _msttexthash="8194797" _msthash="150">NNN 分钟</li><li value="4" _msttexthash="4078516" _msthash="151">NNN 秒</li><li value="5" _msttexthash="6397404" _msthash="152">NNN 个月</li><li value="6" _msttexthash="3167736" _msthash="153">NNN 年</li><li value="7" _msttexthash="8544822" _msthash="154">±HH：MM</li><li value="8" _msttexthash="19612827" _msthash="155">±HH：MM：SS</li><li value="9" _msttexthash="22227413" _msthash="156">±HH：MM：SS。SSS</li><li value="10" _msttexthash="132067" _msthash="157">±YYYY-MM-DD</li><li value="11" _msttexthash="17189302" _msthash="158">±YYYY-MM-DD HH：MM</li><li value="12" _msttexthash="36768667" _msthash="159">±YYYY-MM-DD HH：MM：SS</li><li value="13" _msttexthash="36874851" _msthash="160">±YYYY-MM-DD HH：MM：SS.SSS</li><li value="14" _msttexthash="8656518" _msthash="161">天花板</li><li value="15" _msttexthash="4786600" _msthash="162">地板</li><li value="16" _msttexthash="4586400" _msthash="163">月初</li><li value="17" _msttexthash="4386564" _msthash="164">年初</li><li value="18" _msttexthash="14189409" _msthash="165">一天的开始</li><li value="19" _msttexthash="7362316" _msthash="166">工作日 N</li><li value="20" _msttexthash="138944" _msthash="167">unixepoch</li><li value="21" _msttexthash="12122500" _msthash="168">朱利安迪</li><li value="22" _msttexthash="5227118" _msthash="169">自动</li><li value="23" _msttexthash="12769146" _msthash="170">本地时间</li><li value="24" _msttexthash="24310" _msthash="171">UTC</li><li value="25" _msttexthash="5370560" _msthash="172">子秒</li><li value="26" _msttexthash="5074446" _msthash="173">亚秒</li></ol>

<p><font _mstmutation="1" _msttexthash="1209668161" _msthash="174">前 13 个修饰符（1 到 13）
将指定的时间量添加到日期和时间
由其左侧的参数指定。
1 到 6 中修饰符名称末尾的 's' 字符是可选的。
NNN 值可以是任何浮点数，带有可选的“+”或“-”前缀。</font><a name="tmshf"></a>

</p><p _msttexthash="4224280684" _msthash="175"><b _istranslated="1">时间偏移修饰符</b>（7 到 13）将时间值移动
指定的年数、月数、天数、小时数、分钟数和/或秒数。
格式 10 到 13 需要首字母“+”或“-”，但可选
适用于格式 7、8 和 9。更改从左到右应用。
首先，年份被 YYYY 移动，然后月份被 MM 移动，然后是日
通过 DD，依此类推。这
timediff（A，B） 函数返回格式为 13 的时移，该时移
将时间值 B 转换为 A。</p>

<a name="dtambg"></a>

<p _msttexthash="10321274002" _msthash="176">因为一个月或一年的长度从一个月或一年开始变化
到下一个，当将日期移动月份和/或年份时，可能会出现歧义。
例如，2024 年 2 月 29 日之后的一年是哪一天？是 2025-02-28
还是 2025-03-01？或者 2023 年 12 月 31 日之后的两个月是什么时候？
是 2024-02-29 还是 2024-03-02？对于如何解决没有共识
这种歧义，因此 “<b _istranslated="1">ceiling</b>” 和 “<b _istranslated="1">floor</b>” 修饰符
（14 和 15）可用于
让程序员决定。如果时移后的下一个修饰符是
“ceiling”，则日期中的任何歧义都可以通过选择
稍后的日期。“floor” 修饰符可解决歧义
通过解析到上个月的最后一天。默认的
行为是 “ceiling”。</p><p _msttexthash="308985339" _msthash="177">“<b _istranslated="1">start of</b>” 修饰符（16 到 18）将日期向后移动
设置为主题月、年或日的开始。</p>

<p _msttexthash="1246219390" _msthash="178">如有必要，“<b _istranslated="1">weekday</b>” 修饰符会将日期向前推进。
到下一个工作日编号为 N 的日期。星期日为 0，星期一为 1，
等等。
如果日期已在所需的工作日，则 “weekday” 修饰符
保持日期不变。</p>

<a name="jdmod"></a>

<p><font _mstmutation="1" _msttexthash="4014413767" _msthash="179">“<b _mstmutation="1" _istranslated="1">unixepoch</b>” 修饰符 （20） 仅在紧跟
DDDDDDDDDD 格式的 time-value。
此修饰符会导致 DDDDDDDDDD 不被解释
作为儒略日数，但作为 <a href="http://en.wikipedia.org/wiki/Unix_time" _mstmutation="1" _istranslated="1">Unix 时间</a> -
自 1970 年以来的秒数。如果 “unixepoch” 修饰符没有
遵循 DDDDDDDDDD 形式的时间值，表示数字
自 1970 年以来的秒数或其他修饰符
将 “unixepoch” 修饰符与之前的 DDDDDDDDDD 分开，然后
行为未定义。</font><a name="jdmod"></a>

</p><p><font _mstmutation="1" _msttexthash="5422899924" _msthash="180">“<b _mstmutation="1" _istranslated="1">julianday</b>” 修饰符必须紧跟在首字母
time-value 的值，其格式必须为 DDDDDDDDD。任何其他用途
'julianday' 修饰符是一个错误，会导致函数返回 NULL。
'julianday' 修饰符强制解释时间值数字
作为儒略日数。由于这是默认行为，因此 'julianday'
modifier 只不过是一个 no-op。唯一的区别是
添加 'julianday' 会强制使用 DDDDDDDDD 时间值格式，并导致
如果使用任何其他时间值格式，则返回 NULL。</font><a name="automod"></a>

</p><p><font _mstmutation="1" _msttexthash="33213139050" _msthash="181">“<b _mstmutation="1" _istranslated="1">auto</b>” 修饰符必须紧跟在初始 time-value 之后。
如果时间值是数字（DDDDDDDDDDDD 格式），则 'auto'
修饰符会导致 time-value 被解释为儒略日
number 或 unix 时间戳，具体取决于其大小。如果值
介于 0.0 和 5373484.499999 之间，则解释为儒略
天数（对应于
-4713-11-24 12：00：00 和 9999-12-31 23：59：59，包括在内）。对于数字
值超出有效儒略日数字的范围，但在
-210866760000 到 253402300799 的范围，则 'auto' 修饰符会导致
要解释为 UNIX 时间戳的值。其他数值
超出范围，并导致返回 NULL。'auto' 修饰符是无作
（对于 ISO 8601 文本时间值）。
“auto” 修饰符旨在与 time-values 一起使用，即使在
不知道哪种时间值格式的情况
存储在数据库文件中，或者在同一列
将时间值以不同的格式存储在不同的行上。
'auto' 修饰符将自动选择
适当的格式。但是，存在一些歧义。Unix （英语）
1970 年前 63 天的时间戳将解释为 Julian
天数字。当数据集为
保证不包含该范围内的日期，但应为
避免用于可能在开场中使用日期的应用程序
1970 年的几个月。</font><a name="localtime"></a>

</p><p _msttexthash="4039477728" _msthash="182">“<b _istranslated="1">localtime</b>” 修饰符假定其左侧的 time-value 为
世界协调时间 （UTC） 并调整该时间
值，使其采用 localtime 格式。如果 “localtime”
遵循非 UTC 的时间，则行为未定义。
“<b _istranslated="1">utc</b>” 修饰符与 “localtime” 相反。
“utc” 假定 time-value
的左侧是本地时区，并将该时间值调整为 UTC。
如果左侧的时间不是本地时间，则 “utc” 的结果是
定义。</p>

<a name="subsec"></a>

<p _msttexthash="23869921673" _msthash="183">“<b _istranslated="1">subsecond</b>” 修饰符（可以缩写为
“<b _istranslated="1">subsec</b>”） 会增加 <a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#dttm" _istranslated="1">datetime（）、</a><a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#dttm" _istranslated="1">time（）</a> 和 <a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#uepch" _istranslated="1">unixepoch（）</a> 以及 “%s”
format <a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#strftm" _istranslated="1">字符串。</a>“亚秒”
修饰符对其他日期/时间函数没有影响。
当前实现将分辨率从秒提高到
设置为毫秒，但这可能会提高到更高的分辨率
在 SQLite 的未来版本中。当 “subsec” 与 <a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#dttm" _istranslated="1">datetime（）</a> 或 <a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#dttm" _istranslated="1">time（）</a> 一起使用时，末尾的 seconds 字段为
后跟一个小数点和一个或多个数字
小数秒。当 “subsec” 与 <a href="file:///E:/Code/VsStudio/Jingan567/LcDataBaseCoverAll/SqliteTemplate/FileDocument/SQLite.NET/Core/lang_datefunc.html#uepch" _istranslated="1">unixepoch（）</a> 一起使用时，
结果是一个浮点值，它是
秒和小数秒，自 1970 年 1 月 1 日以来。
“subsecond” 和 “subsec” 修饰符具有特殊属性
它们可以作为日期/时间函数的第一个参数出现
（或作为 strftime（） 的格式字符串后的第一个参数）。
发生这种情况时，通常位于第一个
argument 被理解为“现在”。例如，将
获取自 1970 年以来的当前时间（以秒为单位），使用毫秒
precision 就是说：</p><blockquote _msttexthash="59334470" _msthash="184">SELECT unixepoch（'子秒'）;</blockquote>

<h1 id="examples" _msttexthash="6287684" _msthash="185"><span _istranslated="1">4. </span>示例</h1>

<p _msttexthash="22062781" _msthash="186">计算当前日期。</p><p>

</p><blockquote _msttexthash="35592570" _msthash="187">SELECT 日期（）;</blockquote>

<p _msttexthash="35557223" _msthash="188">计算当月的最后一天。</p>

<blockquote _msttexthash="177676317" _msthash="189">SELECT date（'现在'，'月初'，'+1 个月'，'-1 天'）;</blockquote>

<p _msttexthash="82979104" _msthash="190">计算给定 unix 时间戳的日期和时间1092941466。</p>

<blockquote _msttexthash="525843864" _msthash="191">SELECT datetime（1092941466， 'unixepoch'）;<br _istranslated="1">选择 datetime（1092941466， 'auto'）;-- 不适用于 1970 年初！</blockquote>

<p _msttexthash="242292141" _msthash="192">计算给定 unix 时间戳的日期和时间1092941466，并且
补偿您的本地时区。</p>

<blockquote _msttexthash="131515124" _msthash="193">SELECT datetime（1092941466， 'unixepoch'， 'localtime'）;</blockquote>

<p _msttexthash="33717021" _msthash="194">计算当前 unix 时间戳。</p>

<blockquote _msttexthash="112177364" _msthash="195">选择 unixepoch（）;<br _istranslated="1">选择 strftime（'%s'）;</blockquote>

<p _msttexthash="89462178" _msthash="196">计算自签署美国宣言以来的天数
独立。</p>

<blockquote _msttexthash="124230951" _msthash="197">选择 julianday（'现在'） - julianday（'1776-07-04'）;</blockquote>

<p _msttexthash="93363907" _msthash="198">计算自 2004 年特定时刻以来的秒数：</p>

<blockquote _msttexthash="184383771" _msthash="199">选择 unixepoch（） - unixepoch（'2004-01-01 02：34：56'）;</blockquote>

<p _msttexthash="102757694" _msthash="200">计算 10 月第一个星期二的日期
对于当前年份。</p>

<blockquote _msttexthash="200456789" _msthash="201">SELECT date（'现在'，'年初'，'+9 个月'，'工作日 2'）;</blockquote>

<p _msttexthash="251288635" _msthash="202">计算自 unix 纪元以来的时间（以秒为单位），使用
毫秒精度：</p>

<blockquote _msttexthash="298315173" _msthash="203">选择 （julianday（'now'） - 2440587.5）*86400.0;<br _istranslated="1"> SELECT unixepoch（'现在'，'subsec'）;</blockquote>

<p _msttexthash="205469030" _msthash="204">计算一下如果亚伯拉罕·林肯今天还活着，他会有多大年纪：</p>

<blockquote _msttexthash="82309383" _msthash="205">选择 timediff（'现在'，'1809-02-12'）;</blockquote>

<h1 id="caveats_and_bugs" _msttexthash="22093552" _msthash="206"><span _istranslated="1">5. </span>警告和错误</h1>

<p _msttexthash="3731338975" _msthash="207">当地时间的计算在很大程度上取决于心血来潮
的政客，因此很难正确
所有区域设置。在此实现中，标准 C 库
函数 localtime_r（） 用于协助计算
当地时间。这
localtime_r（） C 函数通常只能工作几年
1970 年至 2037 年间。对于超出此范围的日期，SQLite
尝试将年份映射到
此范围，请进行计算，然后将年份映射回去。</p>

<p _msttexthash="1075136660" _msthash="208">这些函数仅适用于 0000-01-01 00：00：00 之间的日期
和 9999-12-31 23：59：59（儒略日编号 1721059.5 到 5373484.5）。
对于超出该范围的日期，这些
函数是 undefined。</p>

<p _msttexthash="3019706950" _msthash="209">非 Vista Windows 平台仅支持一组 DST 规则。
Vista 仅支持两种。因此，在这些平台上，
历史 DST 计算将不正确。
例如，在美国，2007 年 DST 规则发生了变化。
非 Vista Windows 平台应用新的 2007 DST 规则
也到所有以前的年份。Vista 做得稍微好一些
让结果正确回到 1986 年，当时规则也发生了变化。</p>

<p _msttexthash="338426725" _msthash="210">所有内部计算都采用<a href="http://en.wikipedia.org/wiki/Gregorian_calendar" _istranslated="1">公历</a>系统。他们还假设每个
day 的持续时间正好为 86400 秒;未包含闰秒。</p>
<p align="center"><small><i _msttexthash="77565657" _msthash="211">此页面最后修改于 <a href="https://sqlite.org/docsrc/honeypot" id="mtimelink" data-href="https://sqlite.org/docsrc/finfo/pages/lang_datefunc.in?m=ab33c4f78f" _istranslated="1">2024-08-14 17：04：32</a> UTC</i></small></p>

</div></body></html>